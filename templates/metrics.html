{% extends 'base.html' %}
{% block title %} {{ title }} {% endblock %}

{% block content %}
    <legend> {{ legend }} </legend>

    <div class="content-section">
        <p style="margin: 0">This page provides an interface to measure the performance of a given translation with
            N-gram based metrics.</p>
    </div>

    <form class="form-control" onsubmit="return preventSubmission(event)">

        <div class="input-group mb-3 options">
            <div class="input-group-prepend">
                <label class="input-group-text" for="metric-select">Metrics</label>
            </div>
            <select class="custom-select" id="metric-select" name="metric" required style="margin-right: 16px">
                <option selected disabled value="" id="metric-placeholder">Choose Metric</option>
                {% for metric, metric_name in metrics.items() %}
                    <option value="{{ metric }}">{{ metric_name }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="container border-top border-bottom" id="preprocessing">
            <h5 class="display-5">Text pre-processing:</h5>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="checkbox" id="contractions" name="contractions" value="1">
                <label class="form-check-label" for="contractions">Expand contractions (e.g. I`m -> I am)</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="checkbox" id="spec-chars" name="spec-chars" value="1">
                <label class="form-check-label" for="spec-chars">Remove special characters (e.g. ",")</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="checkbox" id="lowercase" name="lowercase" value="1">
                <label class="form-check-label" for="lowercase">Lowercase</label>
            </div>
        </div>
        <div class="d-flex bd-highlight mb-3">
            <div class="p-2 bd-highlight">Type your hypothesis translation here:
                <p><textarea id="input-text-hypothesis"></textarea></p>
            </div>
            <div class="ml-auto p-2 bd-highlight">Type your reference translation here:
                <p><textarea id="input-text-reference"></textarea></p>
            </div>
        </div>

        <input class="btn btn-outline-secondary mb-2" id="submit-button" type="submit" value="Evaluate" disabled>
    </form>

    <hr>

    <div class="d-none" id="output-container">
        <div class="container">
            <div class="row">
                <div class="col border">
                    <strong>Hypothesis</strong>: <br><span id="hypothesis-sentence"></span>
                </div>
                <div class="col border">
                    <strong>Reference</strong>: <br> <span id="reference-sentence"></span>
                </div>
            </div>
        </div>
        <div class="container-md">
            <ul class="list-group">
                <li class="list-group-item text-center">
                    <span id="metric-name"><strong></strong></span>: <span id="metric-score"></span></li>
            </ul>
        </div>
    </div>

    <script type="text/javascript" src="{{ url_for('static', filename='js/n-gram-metrics.js') }}"></script>
{% endblock content %}

{% block sidebar %}
    <div class="col-md-4">
        <div class="content-section">
            <h3>References</h3>
            <ul class="list-group">
                <li class="list-group-item list-group-item-light"><a class="btn-link" target="_blank"
                                                                     href="https://www.nltk.org/api/nltk.translate.html">NLTK
                    Translate Package</a></li>
                <li class="list-group-item list-group-item-light"><a class="btn-link" target="_blank"
                                                                     href="https://www.aclweb.org/anthology/P02-1040/">BLEU
                    Paper</a></li>
            </ul>
        </div>
    </div>
{% endblock %}
